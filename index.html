<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>アイコン文字入れシミュレーター</title>
<style>
:root {
  --bg:#f8f8f8;
  --accent1:#ff7f50;
  --accent2:#6a5acd;
}

body{
  margin:0;
  font-family: 'Segoe UI',sans-serif;
  background:var(--bg);
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
}

h1{
  font-size:1.4rem;
  margin:12px 0 4px;
}
h2{
  font-size:0.9rem;
  font-weight:normal;
  margin-bottom:20px;
  color:#666;
}

.container{
  display:flex;
  flex-direction:column;
  width:95%;
  max-width:800px;
}

.preview-area{
  text-align:center;
  margin-bottom:12px;
}

#preview{
  max-width:100%;
  height:auto;
  border:1px solid #ddd;
  border-radius:8px;
  background:#fff;
}

.settings{
  display:grid;
  gap:12px;
}

.field label{
  display:block;
  margin-bottom:4px;
  font-weight:bold;
  font-size:0.9rem;
}

input[type="text"]{
  width:100%;
  padding:6px;
  font-size:1rem;
}

input[type="color"]{
  width:60px;
  height:34px;
  padding:0;
  border:none;
}

input[type="range"]{
  width:100%;
}

select{
  width:100%;
  padding:6px;
  font-size:1rem;
}

/* ==== スイッチ風トグル ==== */
.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
  margin: 6px 0;
}
.switch input {display:none;}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0;
  right: 0; bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 34px;
}
.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}
input:checked + .slider {
  background-color: var(--accent1);
}
input:checked + .slider:before {
  transform: translateX(26px);
}

.switch-labels {
  display:flex;
  justify-content: space-between;
  margin-top:4px;
  font-size:0.85rem;
  color:#444;
}

/* ボタン */
button{
  background:var(--accent2);
  color:#fff;
  border:none;
  padding:10px 18px;
  font-size:1rem;
  border-radius:6px;
  cursor:pointer;
}
button:hover{opacity:0.9;}

@media (min-width:700px){
  .container{flex-direction:row;}
  .settings{width:300px;}
  .preview-area{flex:1;}
}
</style>
</head>
<body>
  <h1>アイコン文字入れシミュレーター</h1>
  <h2>-慌てて作ったからまだ試作だわん-</h2>

  <div class="container">
    <!-- プレビュー -->
    <div class="preview-area">
      <canvas id="preview"></canvas>
    </div>

    <!-- 設定パネル -->
    <div class="settings">

      <!-- ベース画像スイッチ -->
      <div class="field">
        <label>ベース画像</label>
        <label class="switch">
          <input type="checkbox" id="baseToggle">
          <span class="slider"></span>
        </label>
        <div class="switch-labels">
          <span>画像1</span><span>画像2</span>
        </div>
      </div>

      <div class="field">
        <label>文字</label>
        <input type="text" id="textInput" value="サンプル文字">
      </div>

      <div class="field">
        <label>文字色</label>
        <input type="color" id="colorInput" value="#ff0000">
      </div>

      <div class="field">
        <label>フォント</label>
        <select id="fontSelect">
          <!-- 英字 -->
          <option value="Playfair Display">Playfair Display（シック）</option>
          <option value="Cormorant Garamond">Cormorant Garamond（シック）</option>
          <option value="Fredoka One">Fredoka One（ポップ）</option>
          <option value="Baloo 2">Baloo 2（ポップ）</option>
          <!-- 日本語 -->
          <option value="RocknRoll One">RocknRoll One（角張）</option>
          <option value="M PLUS 1p">M PLUS 1p（角張）</option>
          <option value="Zen Maru Gothic">Zen Maru Gothic（丸太字）</option>
          <option value="Yusei Magic">Yusei Magic（丸太字）</option>
        </select>
      </div>

      <div class="field">
        <label>文字サイズ</label>
        <input type="range" id="fontSize" min="10" max="120" value="48">
      </div>

      <div class="field">
        <label>X位置</label>
        <input type="range" id="xPos" min="0" max="600" value="100">
      </div>

      <div class="field">
        <label>Y位置</label>
        <input type="range" id="yPos" min="0" max="600" value="100">
      </div>

      <button id="downloadBtn">ダウンロード</button>
    </div>
  </div>

<script>
// --- 初期変数 ---
const canvas = document.getElementById('preview');
const ctx = canvas.getContext('2d');
canvas.width = 600; canvas.height = 600;

const baseImg = new Image();
baseImg.src = 'base1.png';

const textInput = document.getElementById('textInput');
const colorInput = document.getElementById('colorInput');
const fontSelect = document.getElementById('fontSelect');
const fontSize = document.getElementById('fontSize');
const xPos = document.getElementById('xPos');
const yPos = document.getElementById('yPos');
const downloadBtn = document.getElementById('downloadBtn');

// 描画関数
function drawAndUpdatePreview(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.drawImage(baseImg,0,0,canvas.width,canvas.height);
  ctx.fillStyle = colorInput.value;
  ctx.font = `${fontSize.value}px "${fontSelect.value}", sans-serif`;
  ctx.textBaseline = 'top';
  ctx.fillText(textInput.value, parseInt(xPos.value), parseInt(yPos.value));
}

// 自動更新
[textInput,colorInput,fontSelect,fontSize,xPos,yPos]
  .forEach(el=> el.addEventListener('input', drawAndUpdatePreview));

// ダウンロード
downloadBtn.addEventListener('click',()=>{
  const link=document.createElement('a');
  link.download='icon_text.png';
  link.href=canvas.toDataURL('image/png');
  link.click();
});

// ベース画像切替
document.getElementById('baseToggle').addEventListener('change', e=>{
  baseImg.src = e.target.checked ? 'base2.png' : 'base1.png';
});

// 初回描画
baseImg.onload = drawAndUpdatePreview;
</script>
</body>
</html>
